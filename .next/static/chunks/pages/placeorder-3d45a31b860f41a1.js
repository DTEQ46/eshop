(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[567],{5477:function(e,r,n){"use strict";var i=n(7462),t=n(5987),s=n(7294),a=n(6010),c=n(1591),o=n(3871),l=44,d=s.forwardRef((function(e,r){var n=e.classes,c=e.className,d=e.color,h=void 0===d?"primary":d,x=e.disableShrink,u=void 0!==x&&x,m=e.size,Z=void 0===m?40:m,j=e.style,p=e.thickness,f=void 0===p?3.6:p,v=e.value,g=void 0===v?0:v,y=e.variant,k=void 0===y?"indeterminate":y,P=(0,t.Z)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),N={},S={},_={};if("determinate"===k||"static"===k){var b=2*Math.PI*((l-f)/2);N.strokeDasharray=b.toFixed(3),_["aria-valuenow"]=Math.round(g),N.strokeDashoffset="".concat(((100-g)/100*b).toFixed(3),"px"),S.transform="rotate(-90deg)"}return s.createElement("div",(0,i.Z)({className:(0,a.Z)(n.root,c,"inherit"!==h&&n["color".concat((0,o.Z)(h))],{determinate:n.determinate,indeterminate:n.indeterminate,static:n.static}[k]),style:(0,i.Z)({width:Z,height:Z},S,j),ref:r,role:"progressbar"},_,P),s.createElement("svg",{className:n.svg,viewBox:"".concat(22," ").concat(22," ").concat(l," ").concat(l)},s.createElement("circle",{className:(0,a.Z)(n.circle,u&&n.circleDisableShrink,{determinate:n.circleDeterminate,indeterminate:n.circleIndeterminate,static:n.circleStatic}[k]),style:N,cx:l,cy:l,r:(l-f)/2,fill:"none",strokeWidth:f})))}));r.Z=(0,c.Z)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:e.transitions.create("transform")},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:e.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(d)},7782:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/placeorder",function(){return n(4604)}])},7304:function(e,r,n){"use strict";n.d(r,{Z:function(){return o}});var i=n(5893),t=n(5357),s=n(1594),a=n(2876),c=(n(7294),n(4940));function o(e){var r=e.activeStep,n=void 0===r?0:r,o=(0,c.Z)();return(0,i.jsx)(t.Z,{className:o.transparentBackgroud,activeStep:n,alternativeLabel:!0,children:["Login","Shipping Address","Payment Method","Place Order"].map((function(e){return(0,i.jsx)(s.Z,{children:(0,i.jsx)(a.Z,{children:e})},e)}))})}},4604:function(e,r,n){"use strict";n.r(r);var i=n(4051),t=n.n(i),s=n(5893),a=n(7294),c=n(5152),o=n(1641),l=n(7005),d=n(1664),h=n(2252),x=n(2318),u=n(1749),m=n(8463),Z=n(2822),j=n(998),p=n(6847),f=n(2302),v=n(3750),g=n(7394),y=n(8222),k=n(9613),P=n(9659),N=n(282),S=n(5477),_=n(9669),b=n.n(_),w=n(1163),D=n(4940),E=n(7304),I=n(8766),O=n(1955);function C(e,r,n,i,t,s,a){try{var c=e[s](a),o=c.value}catch(l){return void n(l)}c.done?r(o):Promise.resolve(o).then(i,t)}function M(){var e=(0,D.Z)(),r=(0,w.useRouter)(),n=(0,a.useContext)(l.yh),i=n.state,c=n.dispatch,_=i.userInfo,M=i.cart,A=M.cartItems,T=M.shippingAddress,L=M.paymentMethod,R=function(e){return Math.round(100*e+Number.EPSILON)/100},q=R(A.reduce((function(e,r){return e+r.price*r.quantity}),0)),z=q>5e4?0:15,B=R(.15*q),F=R(q+z+B);(0,a.useEffect)((function(){L||r.push("/payment"),0===A.length&&r.push("/cart")}),[]);var H=(0,I.Ds)(),W=H.closeSnackbar,X=H.enqueueSnackbar,$=(0,a.useState)(!1),Q=$[0],G=$[1],J=function(){var e,n=(e=t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(),e.prev=1,G(!0),e.next=5,b().post("/api/orders",{orderItems:A,shippingAddress:T,paymentMethod:L,itemsPrice:q,shippingPrice:z,taxPrice:B,totalPrice:F},{headers:{authorization:"Bearer ".concat(_.token)}});case 5:n=e.sent.data,c({type:l.e0.CART_CLEAR}),O.Z.remove("cartItems"),G(!1),r.push("/order/".concat(n._id)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),G(!1),X((0,h.b)(e.t0),{variant:"error"});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var r=this,n=arguments;return new Promise((function(i,t){var s=e.apply(r,n);function a(e){C(s,i,t,a,c,"next",e)}function c(e){C(s,i,t,a,c,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,s.jsxs)(o.Z,{title:"Place Order",children:[(0,s.jsx)(E.Z,{activeStep:3}),(0,s.jsx)(x.Z,{component:"h1",variant:"h1",children:"Place Order"}),(0,s.jsxs)(u.Z,{container:!0,spacing:1,children:[(0,s.jsxs)(u.Z,{item:!0,md:9,xs:12,children:[(0,s.jsx)(m.Z,{className:e.section,children:(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(j.Z,{children:(0,s.jsx)(x.Z,{component:"h2",variant:"h2",children:"Shipping Address"})}),(0,s.jsxs)(j.Z,{children:[T.fullName,", ",T.address,","," ",T.city,", ",T.postalCode,","," ",T.country]})]})}),(0,s.jsx)(m.Z,{className:e.section,children:(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(j.Z,{children:(0,s.jsx)(x.Z,{component:"h2",variant:"h2",children:"Payment Method"})}),(0,s.jsx)(j.Z,{children:L})]})}),(0,s.jsx)(m.Z,{className:e.section,children:(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(j.Z,{children:(0,s.jsx)(x.Z,{component:"h2",variant:"h2",children:"Order Items"})}),(0,s.jsx)(j.Z,{children:(0,s.jsx)(p.Z,{children:(0,s.jsxs)(f.Z,{children:[(0,s.jsx)(v.Z,{children:(0,s.jsxs)(g.Z,{children:[(0,s.jsx)(y.Z,{children:"Image"}),(0,s.jsx)(y.Z,{children:"Name"}),(0,s.jsx)(y.Z,{align:"right",children:"Quantity"}),(0,s.jsx)(y.Z,{align:"right",children:"Price"})]})}),(0,s.jsx)(k.Z,{children:A.map((function(e){return(0,s.jsxs)(g.Z,{children:[(0,s.jsx)(y.Z,{children:(0,s.jsx)(d.default,{href:"/product/".concat(e.slug),passHref:!0,children:(0,s.jsx)(P.Z,{children:(0,s.jsx)("img",{src:e.image_url,alt:e.name,width:50,height:50})})})}),(0,s.jsx)(y.Z,{children:(0,s.jsx)(d.default,{href:"/product/".concat(e.slug),passHref:!0,children:(0,s.jsx)(P.Z,{children:(0,s.jsx)(x.Z,{children:e.name})})})}),(0,s.jsx)(y.Z,{align:"right",children:(0,s.jsx)(x.Z,{children:e.quantity})}),(0,s.jsx)(y.Z,{align:"right",children:(0,s.jsxs)(x.Z,{children:["\u20a6",e.price]})})]},e._id)}))})]})})})]})})]}),(0,s.jsx)(u.Z,{item:!0,md:3,xs:12,children:(0,s.jsx)(m.Z,{className:e.section,children:(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(j.Z,{children:(0,s.jsx)(x.Z,{variant:"h2",children:"Order Summary"})}),(0,s.jsx)(j.Z,{children:(0,s.jsxs)(u.Z,{container:!0,children:[(0,s.jsx)(u.Z,{item:!0,xs:6,children:(0,s.jsx)(x.Z,{children:"Items:"})}),(0,s.jsx)(u.Z,{item:!0,xs:6,children:(0,s.jsxs)(x.Z,{align:"right",children:["\u20a6",q]})})]})}),(0,s.jsx)(j.Z,{children:(0,s.jsxs)(u.Z,{container:!0,children:[(0,s.jsx)(u.Z,{item:!0,xs:6,children:(0,s.jsx)(x.Z,{children:"Tax:"})}),(0,s.jsx)(u.Z,{item:!0,xs:6,children:(0,s.jsxs)(x.Z,{align:"right",children:["\u20a6",B]})})]})}),(0,s.jsx)(j.Z,{children:(0,s.jsxs)(u.Z,{container:!0,children:[(0,s.jsx)(u.Z,{item:!0,xs:6,children:(0,s.jsx)(x.Z,{children:"Shipping:"})}),(0,s.jsx)(u.Z,{item:!0,xs:6,children:(0,s.jsxs)(x.Z,{align:"right",children:["\u20a6",z]})})]})}),(0,s.jsx)(j.Z,{children:(0,s.jsxs)(u.Z,{container:!0,children:[(0,s.jsx)(u.Z,{item:!0,xs:6,children:(0,s.jsx)(x.Z,{children:(0,s.jsx)("strong",{children:"Total:"})})}),(0,s.jsx)(u.Z,{item:!0,xs:6,children:(0,s.jsx)(x.Z,{align:"right",children:(0,s.jsxs)("strong",{children:["\u20a6",F]})})})]})}),(0,s.jsx)(j.Z,{children:(0,s.jsx)(N.Z,{onClick:J,variant:"contained",color:"primary",fullWidth:!0,children:"Place Order"})}),Q&&(0,s.jsx)(j.Z,{children:(0,s.jsx)(S.Z,{})})]})})})]})]})}r.default=(0,c.default)((function(){return Promise.resolve(M)}),{ssr:!1})}},function(e){e.O(0,[967,164,349,324,641,774,888,179],(function(){return r=7782,e(e.s=r);var r}));var r=e.O();_N_E=r}]);