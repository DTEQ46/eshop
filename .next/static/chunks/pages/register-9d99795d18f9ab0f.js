(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{2072:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return n(6455)}])},6455:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return O}});var t=n(4051),a=n.n(t),i=n(5893),o=n(2318),s=n(2822),u=n(998),l=n(8101),c=n(282),d=n(9659),f=n(9669),p=n.n(f),m=n(1163),h=n(1664),w=n(7294),v=n(1641),x=n(7005),b=n(4940),j=n(1955),y=n(7536),P=n(8766),g=n(2252);function Z(e,r,n,t,a,i,o){try{var s=e[i](o),u=s.value}catch(l){return void n(l)}s.done?r(u):Promise.resolve(u).then(t,a)}function _(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function E(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){_(e,r,n[r])}))}return e}function O(){var e=(0,y.cI)(),r=e.handleSubmit,n=e.control,t=e.formState.errors,f=(0,P.Ds)(),_=f.enqueueSnackbar,O=f.closeSnackbar,k=(0,m.useRouter)(),q=k.query,N=(0,w.useContext)(x.yh),L=N.state,S=N.dispatch,C=L.userInfo;(0,w.useEffect)((function(){C&&k.push("/")}),[]);var T=(0,b.Z)(),R=function(){var e,r=(e=a().mark((function e(r){var n,t,i,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.name,t=r.email,i=r.password,o=r.confirmPassword,O(),i===o){e.next=5;break}return _("Passwords don't match",{variant:"error"}),e.abrupt("return");case 5:return e.prev=5,e.next=8,p().post("/api/users/register",{name:n,email:t,password:i});case 8:s=e.sent.data,S({type:x.u6.USER_LOGIN,payload:s}),j.Z.set("userInfo",s),k.push(q||"/"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),_((0,g.b)(e.t0),{variant:"error"});case 17:case"end":return e.stop()}}),e,null,[[5,14]])})),function(){var r=this,n=arguments;return new Promise((function(t,a){var i=e.apply(r,n);function o(e){Z(i,t,a,o,s,"next",e)}function s(e){Z(i,t,a,o,s,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}();return(0,i.jsx)(v.Z,{title:"Register",children:(0,i.jsxs)("form",{onSubmit:r(R),className:T.form,children:[(0,i.jsx)(o.Z,{component:"h1",variant:"h1",children:"Register"}),(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(u.Z,{children:(0,i.jsx)(y.Qr,{name:"name",control:n,defaultValue:"",rules:{required:!0,minLength:2},render:function(e){var r=e.field;return(0,i.jsx)(l.Z,E({variant:"outlined",fullWidth:!0,id:"name",label:"Name",inputProps:{type:"name"},error:Boolean(t.name),helperText:t.name?"minLength"===t.name.type?"Name length is more than 1":"Name is required":""},r))}})}),(0,i.jsx)(u.Z,{children:(0,i.jsx)(y.Qr,{name:"email",control:n,defaultValue:"",rules:{required:!0,pattern:/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/},render:function(e){var r=e.field;return(0,i.jsx)(l.Z,E({variant:"outlined",fullWidth:!0,id:"email",label:"Email",inputProps:{type:"email"},error:Boolean(t.email),helperText:t.email?"pattern"===t.email.type?"Email is not valid":"Email is required":""},r))}})}),(0,i.jsx)(u.Z,{children:(0,i.jsx)(y.Qr,{name:"password",control:n,defaultValue:"",rules:{required:!0,minLength:6},render:function(e){var r=e.field;return(0,i.jsx)(l.Z,E({variant:"outlined",fullWidth:!0,id:"password",label:"Password",inputProps:{type:"password"},error:Boolean(t.password),helperText:t.password?"minLength"===t.password.type?"Password length is more than 5":"Password is required":""},r))}})}),(0,i.jsx)(u.Z,{children:(0,i.jsx)(y.Qr,{name:"confirmPassword",control:n,defaultValue:"",rules:{required:!0,minLength:6},render:function(e){var r=e.field;return(0,i.jsx)(l.Z,E({variant:"outlined",fullWidth:!0,id:"confirmPassword",label:"Confirm Password",inputProps:{type:"password"},error:Boolean(t.confirmPassword),helperText:t.confirmPassword?"minLength"===t.confirmPassword.type?"Confirm Password length is more than 5":"Confirm  Password is required":""},r))}})}),(0,i.jsx)(u.Z,{children:(0,i.jsx)(c.Z,{variant:"contained",type:"submit",fullWidth:!0,color:"primary",children:"Register"})}),(0,i.jsxs)(u.Z,{children:["Already have an account? \xa0",(0,i.jsx)(h.default,{href:"/login?redirect=".concat(q||"/"),passHref:!0,children:(0,i.jsx)(d.Z,{children:"Login"})})]})]})]})})}}},function(e){e.O(0,[967,164,924,101,536,641,774,888,179],(function(){return r=2072,e(e.s=r);var r}));var r=e.O();_N_E=r}]);