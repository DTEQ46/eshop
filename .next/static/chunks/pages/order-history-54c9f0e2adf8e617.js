(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[744],{5477:function(e,r,t){"use strict";var n=t(7462),i=t(5987),a=t(7294),s=t(6010),o=t(1591),c=t(3871),l=44,d=a.forwardRef((function(e,r){var t=e.classes,o=e.className,d=e.color,h=void 0===d?"primary":d,u=e.disableShrink,f=void 0!==u&&u,p=e.size,x=void 0===p?40:p,m=e.style,v=e.thickness,y=void 0===v?3.6:v,Z=e.value,j=void 0===Z?0:Z,k=e.variant,E=void 0===k?"indeterminate":k,b=(0,i.Z)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),g={},D={},_={};if("determinate"===E||"static"===E){var w=2*Math.PI*((l-y)/2);g.strokeDasharray=w.toFixed(3),_["aria-valuenow"]=Math.round(j),g.strokeDashoffset="".concat(((100-j)/100*w).toFixed(3),"px"),D.transform="rotate(-90deg)"}return a.createElement("div",(0,n.Z)({className:(0,s.Z)(t.root,o,"inherit"!==h&&t["color".concat((0,c.Z)(h))],{determinate:t.determinate,indeterminate:t.indeterminate,static:t.static}[E]),style:(0,n.Z)({width:x,height:x},D,m),ref:r,role:"progressbar"},_,b),a.createElement("svg",{className:t.svg,viewBox:"".concat(22," ").concat(22," ").concat(l," ").concat(l)},a.createElement("circle",{className:(0,s.Z)(t.circle,f&&t.circleDisableShrink,{determinate:t.circleDeterminate,indeterminate:t.circleIndeterminate,static:t.circleStatic}[E]),style:g,cx:l,cy:l,r:(l-y)/2,fill:"none",strokeWidth:y})))}));r.Z=(0,o.Z)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:e.transitions.create("transform")},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:e.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(d)},7034:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/order-history",function(){return t(331)}])},331:function(e,r,t){"use strict";t.r(r);var n=t(4051),i=t.n(n),a=t(5893),s=t(9669),o=t.n(s),c=t(5152),l=t(1163),d=t(1664),h=t(7294),u=t(1749),f=t(8463),p=t(2822),x=t(998),m=t(5757),v=t(2318),y=t(5477),Z=t(6847),j=t(2302),k=t(3750),E=t(7394),b=t(8222),g=t(9613),D=t(282),_=t(2252),w=t(7005),S=t(1641),C=t(4940);function O(e,r,t,n,i,a,s){try{var o=e[a](s),c=o.value}catch(l){return void t(l)}o.done?r(c):Promise.resolve(c).then(n,i)}function P(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function N(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){P(e,r,t[r])}))}return e}var T=function(e,r){switch(r.type){case"FETCH_REQUEST":return N({},e,{loading:!0,error:""});case"FETCH_SUCCESS":return N({},e,{loading:!1,orders:r.payload,error:""});case"FETCH_FAIL":return N({},e,{loading:!1,error:r.payload})}};function H(){var e=(0,h.useContext)(w.yh).state,r=(0,l.useRouter)(),t=(0,C.Z)(),n=e.userInfo,s=(0,h.useReducer)(T,{loading:!0,orders:[],error:""}),c=s[0],P=c.loading,N=c.error,H=c.orders,F=s[1];return(0,h.useEffect)((function(){n||r.push("/login");var e=function(){var e,r=(e=i().mark((function e(){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F({type:"FETCH_REQUEST"}),e.next=4,o().get("/api/orders/history",{headers:{authorization:"Bearer ".concat(n.token)}});case 4:r=e.sent.data,F({type:"FETCH_SUCCESS",payload:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),F({type:"FETCH_FAIL",payload:(0,_.b)(e.t0)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var r=this,t=arguments;return new Promise((function(n,i){var a=e.apply(r,t);function s(e){O(a,n,i,s,o,"next",e)}function o(e){O(a,n,i,s,o,"throw",e)}s(void 0)}))});return function(){return r.apply(this,arguments)}}();e()}),[]),(0,a.jsx)(S.Z,{title:"Order History",children:(0,a.jsxs)(u.Z,{container:!0,spacing:1,children:[(0,a.jsx)(u.Z,{item:!0,md:3,xs:12,children:(0,a.jsx)(f.Z,{className:t.section,children:(0,a.jsxs)(p.Z,{children:[(0,a.jsx)(d.default,{href:"/profile",passHref:!0,children:(0,a.jsx)(x.Z,{button:!0,component:"a",children:(0,a.jsx)(m.Z,{primary:"User Profile"})})}),(0,a.jsx)(d.default,{href:"/order-history",passHref:!0,children:(0,a.jsx)(x.Z,{selected:!0,button:!0,component:"a",children:(0,a.jsx)(m.Z,{primary:"Order History"})})})]})})}),(0,a.jsx)(u.Z,{item:!0,md:9,xs:12,children:(0,a.jsx)(f.Z,{className:t.section,children:(0,a.jsxs)(p.Z,{children:[(0,a.jsx)(x.Z,{children:(0,a.jsx)(v.Z,{component:"h1",variant:"h1",children:"Order History"})}),(0,a.jsx)(x.Z,{children:P?(0,a.jsx)(y.Z,{}):N?(0,a.jsx)(v.Z,{className:t.error,children:N}):(0,a.jsx)(Z.Z,{children:(0,a.jsxs)(j.Z,{children:[(0,a.jsx)(k.Z,{children:(0,a.jsxs)(E.Z,{children:[(0,a.jsx)(b.Z,{children:"ID"}),(0,a.jsx)(b.Z,{children:"DATE"}),(0,a.jsx)(b.Z,{children:"TOTAL"}),(0,a.jsx)(b.Z,{children:"PAID"}),(0,a.jsx)(b.Z,{children:"DELIVERED"}),(0,a.jsx)(b.Z,{children:"ACTION"})]})}),(0,a.jsx)(g.Z,{children:H.map((function(e){return(0,a.jsxs)(E.Z,{children:[(0,a.jsx)(b.Z,{children:e._id.substring(20,24)}),(0,a.jsx)(b.Z,{children:e.createdAt}),(0,a.jsxs)(b.Z,{children:["$",e.totalPrice]}),(0,a.jsx)(b.Z,{children:e.isPaid?"paid at ".concat(e.paidAt):"not paid"}),(0,a.jsx)(b.Z,{children:e.isDelivered?"delivered at ".concat(e.deliveredAt):"not delivered"}),(0,a.jsx)(b.Z,{children:(0,a.jsx)(d.default,{href:"/order/".concat(e._id),passHref:!0,children:(0,a.jsx)(D.Z,{variant:"contained",children:"Details"})})})]},e._id)}))})]})})})]})})})]})})}r.default=(0,c.default)((function(){return Promise.resolve(H)}),{ssr:!1})}},function(e){e.O(0,[967,164,349,641,774,888,179],(function(){return r=7034,e(e.s=r);var r}));var r=e.O();_N_E=r}]);