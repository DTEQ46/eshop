(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[635],{5477:function(e,r,t){"use strict";var n=t(7462),s=t(5987),a=t(7294),i=t(6010),c=t(1591),o=t(3871),l=44,d=a.forwardRef((function(e,r){var t=e.classes,c=e.className,d=e.color,u=void 0===d?"primary":d,h=e.disableShrink,f=void 0!==h&&h,p=e.size,m=void 0===p?40:p,x=e.style,E=e.thickness,j=void 0===E?3.6:E,v=e.value,y=void 0===v?0:v,Z=e.variant,k=void 0===Z?"indeterminate":Z,D=(0,s.Z)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),b={},S={},_={};if("determinate"===k||"static"===k){var g=2*Math.PI*((l-j)/2);b.strokeDasharray=g.toFixed(3),_["aria-valuenow"]=Math.round(y),b.strokeDashoffset="".concat(((100-y)/100*g).toFixed(3),"px"),S.transform="rotate(-90deg)"}return a.createElement("div",(0,n.Z)({className:(0,i.Z)(t.root,c,"inherit"!==u&&t["color".concat((0,o.Z)(u))],{determinate:t.determinate,indeterminate:t.indeterminate,static:t.static}[k]),style:(0,n.Z)({width:m,height:m},S,x),ref:r,role:"progressbar"},_,D),a.createElement("svg",{className:t.svg,viewBox:"".concat(22," ").concat(22," ").concat(l," ").concat(l)},a.createElement("circle",{className:(0,i.Z)(t.circle,f&&t.circleDisableShrink,{determinate:t.circleDeterminate,indeterminate:t.circleIndeterminate,static:t.circleStatic}[k]),style:b,cx:l,cy:l,r:(l-j)/2,fill:"none",strokeWidth:j})))}));r.Z=(0,c.Z)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:e.transitions.create("transform")},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:e.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(d)},7209:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users",function(){return t(7062)}])},7062:function(e,r,t){"use strict";t.r(r);var n=t(4051),s=t.n(n),a=t(5893),i=t(9669),c=t.n(i),o=t(5152),l=t(1163),d=t(1664),u=t(7294),h=t(1749),f=t(8463),p=t(2822),m=t(998),x=t(5757),E=t(2318),j=t(5477),v=t(6847),y=t(2302),Z=t(3750),k=t(7394),D=t(8222),b=t(9613),S=t(282),_=t(2252),g=t(7005),w=t(1641),T=t(4940),C=t(8766);function N(e,r,t,n,s,a,i){try{var c=e[a](i),o=c.value}catch(l){return void t(l)}c.done?r(o):Promise.resolve(o).then(n,s)}function O(e){return function(){var r=this,t=arguments;return new Promise((function(n,s){var a=e.apply(r,t);function i(e){N(a,n,s,i,c,"next",e)}function c(e){N(a,n,s,i,c,"throw",e)}i(void 0)}))}}function I(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function L(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){I(e,r,t[r])}))}return e}function P(e,r){switch(r.type){case"FETCH_REQUEST":return L({},e,{loading:!0,error:""});case"FETCH_SUCCESS":return L({},e,{loading:!1,users:r.payload,error:""});case"FETCH_FAIL":return L({},e,{loading:!1,error:r.payload});case"DELETE_REQUEST":return L({},e,{loadingDelete:!0});case"DELETE_SUCCESS":return L({},e,{loadingDelete:!1,successDelete:!0});case"DELETE_FAIL":return L({},e,{loadingDelete:!1});case"DELETE_RESET":return L({},e,{loadingDelete:!1,successDelete:!1})}}function F(){var e=(0,u.useContext)(g.yh).state,r=(0,l.useRouter)(),t=(0,T.Z)(),n=e.userInfo,i=(0,u.useReducer)(P,{loading:!0,users:[],error:""}),o=i[0],N=o.loading,I=o.error,L=o.users,F=o.successDelete,U=o.loadingDelete,A=i[1];(0,u.useEffect)((function(){n||r.push("/login");var e=function(){var e=O(s().mark((function e(){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A({type:"FETCH_REQUEST"}),e.next=4,c().get("/api/admin/users",{headers:{authorization:"Bearer ".concat(n.token)}});case 4:r=e.sent.data,A({type:"FETCH_SUCCESS",payload:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),A({type:"FETCH_FAIL",payload:(0,_.b)(e.t0)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();F?A({type:"DELETE_RESET"}):e()}),[F]);var H=(0,C.Ds)().enqueueSnackbar,R=function(){var e=O(s().mark((function e(r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure?")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,A({type:"DELETE_REQUEST"}),e.next=6,c().delete("/api/admin/users/".concat(r),{headers:{authorization:"Bearer ".concat(n.token)}});case 6:A({type:"DELETE_SUCCESS"}),H("User deleted successfully",{variant:"success"}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),A({type:"DELETE_FAIL"}),H((0,_.b)(e.t0),{variant:"error"});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(r){return e.apply(this,arguments)}}();return(0,a.jsx)(w.Z,{title:"Users",children:(0,a.jsxs)(h.Z,{container:!0,spacing:1,children:[(0,a.jsx)(h.Z,{item:!0,md:3,xs:12,children:(0,a.jsx)(f.Z,{className:t.section,children:(0,a.jsxs)(p.Z,{children:[(0,a.jsx)(d.default,{href:"/admin/dashboard",passHref:!0,children:(0,a.jsx)(m.Z,{button:!0,component:"a",children:(0,a.jsx)(x.Z,{primary:"Admin Dashboard"})})}),(0,a.jsx)(d.default,{href:"/admin/orders",passHref:!0,children:(0,a.jsx)(m.Z,{button:!0,component:"a",children:(0,a.jsx)(x.Z,{primary:"Orders"})})}),(0,a.jsx)(d.default,{href:"/admin/products",passHref:!0,children:(0,a.jsx)(m.Z,{button:!0,component:"a",children:(0,a.jsx)(x.Z,{primary:"Products"})})}),(0,a.jsx)(d.default,{href:"/admin/users",passHref:!0,children:(0,a.jsx)(m.Z,{selected:!0,button:!0,component:"a",children:(0,a.jsx)(x.Z,{primary:"Users"})})})]})})}),(0,a.jsx)(h.Z,{item:!0,md:9,xs:12,children:(0,a.jsx)(f.Z,{className:t.section,children:(0,a.jsxs)(p.Z,{children:[(0,a.jsxs)(m.Z,{children:[(0,a.jsx)(E.Z,{component:"h1",variant:"h1",children:"Users"}),U&&(0,a.jsx)(j.Z,{})]}),(0,a.jsx)(m.Z,{children:N?(0,a.jsx)(j.Z,{}):I?(0,a.jsx)(E.Z,{className:t.error,children:I}):(0,a.jsx)(v.Z,{children:(0,a.jsxs)(y.Z,{children:[(0,a.jsx)(Z.Z,{children:(0,a.jsxs)(k.Z,{children:[(0,a.jsx)(D.Z,{children:"ID"}),(0,a.jsx)(D.Z,{children:"NAME"}),(0,a.jsx)(D.Z,{children:"EMAIL"}),(0,a.jsx)(D.Z,{children:"ISADMIN"}),(0,a.jsx)(D.Z,{children:"ACTIONS"})]})}),(0,a.jsx)(b.Z,{children:L.map((function(e){return(0,a.jsxs)(k.Z,{children:[(0,a.jsx)(D.Z,{children:e._id.substring(20,24)}),(0,a.jsx)(D.Z,{children:e.name}),(0,a.jsx)(D.Z,{children:e.email}),(0,a.jsx)(D.Z,{children:e.isAdmin?"YES":"NO"}),(0,a.jsxs)(D.Z,{children:[(0,a.jsx)(d.default,{href:"/admin/user/".concat(e._id),passHref:!0,children:(0,a.jsx)(S.Z,{size:"small",variant:"contained",children:"Edit"})})," ",(0,a.jsx)(S.Z,{onClick:function(){return R(e._id)},size:"small",variant:"contained",children:"Delete"})]})]},e._id)}))})]})})})]})})})]})})}r.default=(0,o.default)((function(){return Promise.resolve(F)}),{ssr:!1})}},function(e){e.O(0,[967,164,349,641,774,888,179],(function(){return r=7209,e(e.s=r);var r}));var r=e.O();_N_E=r}]);