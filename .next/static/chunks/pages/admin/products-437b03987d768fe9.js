(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[209],{5477:function(e,r,t){"use strict";var n=t(7462),a=t(5987),s=t(7294),i=t(6010),c=t(1591),o=t(3871),l=44,d=s.forwardRef((function(e,r){var t=e.classes,c=e.className,d=e.color,u=void 0===d?"primary":d,h=e.disableShrink,p=void 0!==h&&h,f=e.size,x=void 0===f?40:f,m=e.style,E=e.thickness,j=void 0===E?3.6:E,v=e.value,y=void 0===v?0:v,Z=e.variant,k=void 0===Z?"indeterminate":Z,C=(0,a.Z)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),b={},S={},_={};if("determinate"===k||"static"===k){var D=2*Math.PI*((l-j)/2);b.strokeDasharray=D.toFixed(3),_["aria-valuenow"]=Math.round(y),b.strokeDashoffset="".concat(((100-y)/100*D).toFixed(3),"px"),S.transform="rotate(-90deg)"}return s.createElement("div",(0,n.Z)({className:(0,i.Z)(t.root,c,"inherit"!==u&&t["color".concat((0,o.Z)(u))],{determinate:t.determinate,indeterminate:t.indeterminate,static:t.static}[k]),style:(0,n.Z)({width:x,height:x},S,m),ref:r,role:"progressbar"},_,C),s.createElement("svg",{className:t.svg,viewBox:"".concat(22," ").concat(22," ").concat(l," ").concat(l)},s.createElement("circle",{className:(0,i.Z)(t.circle,p&&t.circleDisableShrink,{determinate:t.circleDeterminate,indeterminate:t.circleIndeterminate,static:t.circleStatic}[k]),style:b,cx:l,cy:l,r:(l-j)/2,fill:"none",strokeWidth:j})))}));r.Z=(0,c.Z)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:e.transitions.create("transform")},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:e.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(d)},9722:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/products",function(){return t(1243)}])},1243:function(e,r,t){"use strict";t.r(r);var n=t(4051),a=t.n(n),s=t(5893),i=t(9669),c=t.n(i),o=t(5152),l=t(1163),d=t(1664),u=t(7294),h=t(1749),p=t(8463),f=t(2822),x=t(998),m=t(5757),E=t(2318),j=t(5477),v=t(282),y=t(6847),Z=t(2302),k=t(3750),C=t(7394),b=t(8222),S=t(9613),_=t(2252),D=t(7005),g=t(1641),T=t(4940),w=t(8766);function R(e,r,t,n,a,s,i){try{var c=e[s](i),o=c.value}catch(l){return void t(l)}c.done?r(o):Promise.resolve(o).then(n,a)}function A(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function i(e){R(s,n,a,i,c,"next",e)}function c(e){R(s,n,a,i,c,"throw",e)}i(void 0)}))}}function P(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function N(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){P(e,r,t[r])}))}return e}function I(e,r){switch(r.type){case"FETCH_REQUEST":return N({},e,{loading:!0,error:""});case"FETCH_SUCCESS":return N({},e,{loading:!1,products:r.payload,error:""});case"FETCH_FAIL":return N({},e,{loading:!1,error:r.payload});case"CREATE_REQUEST":return N({},e,{loadingCreate:!0});case"CREATE_SUCCESS":case"CREATE_FAIL":return N({},e,{loadingCreate:!1});case"DELETE_REQUEST":return N({},e,{loadingDelete:!0});case"DELETE_SUCCESS":return N({},e,{loadingDelete:!1,successDelete:!0});case"DELETE_FAIL":return N({},e,{loadingDelete:!1});case"DELETE_RESET":return N({},e,{loadingDelete:!1,successDelete:!1})}}function O(){var e=(0,u.useContext)(D.yh).state,r=(0,l.useRouter)(),t=(0,T.Z)(),n=e.userInfo,i=(0,u.useReducer)(I,{loading:!0,products:[],error:""}),o=i[0],R=o.loading,P=o.error,N=o.products,O=o.loadingCreate,F=o.successDelete,L=o.loadingDelete,U=i[1];(0,u.useEffect)((function(){n||r.push("/login");var e=function(){var e=A(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U({type:"FETCH_REQUEST"}),e.next=4,c().get("/api/admin/products",{headers:{authorization:"Bearer ".concat(n.token)}});case 4:r=e.sent.data,U({type:"FETCH_SUCCESS",payload:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),U({type:"FETCH_FAIL",payload:(0,_.b)(e.t0)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();F?U({type:"DELETE_RESET"}):e()}),[F]);var H=(0,w.Ds)().enqueueSnackbar,z=function(){var e=A(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure?")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,U({type:"CREATE_REQUEST"}),e.next=6,c().post("/api/admin/products",{},{headers:{authorization:"Bearer ".concat(n.token)}});case 6:t=e.sent.data,U({type:"CREATE_SUCCESS"}),H("Product created successfully",{variant:"success"}),r.push("/admin/product/".concat(t.product._id)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),U({type:"CREATE_FAIL"}),H((0,_.b)(e.t0),{variant:"error"});case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=A(a().mark((function e(r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure?")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,U({type:"DELETE_REQUEST"}),e.next=6,c().delete("/api/admin/products/".concat(r),{headers:{authorization:"Bearer ".concat(n.token)}});case 6:U({type:"DELETE_SUCCESS"}),H("Product deleted successfully",{variant:"success"}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),U({type:"DELETE_FAIL"}),H((0,_.b)(e.t0),{variant:"error"});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(r){return e.apply(this,arguments)}}();return(0,s.jsx)(g.Z,{title:"Products",children:(0,s.jsxs)(h.Z,{container:!0,spacing:1,children:[(0,s.jsx)(h.Z,{item:!0,md:3,xs:12,children:(0,s.jsx)(p.Z,{className:t.section,children:(0,s.jsxs)(f.Z,{children:[(0,s.jsx)(d.default,{href:"/admin/dashboard",passHref:!0,children:(0,s.jsx)(x.Z,{button:!0,component:"a",children:(0,s.jsx)(m.Z,{primary:"Admin Dashboard"})})}),(0,s.jsx)(d.default,{href:"/admin/orders",passHref:!0,children:(0,s.jsx)(x.Z,{button:!0,component:"a",children:(0,s.jsx)(m.Z,{primary:"Orders"})})}),(0,s.jsx)(d.default,{href:"/admin/products",passHref:!0,children:(0,s.jsx)(x.Z,{selected:!0,button:!0,component:"a",children:(0,s.jsx)(m.Z,{primary:"Products"})})}),(0,s.jsx)(d.default,{href:"/admin/users",passHref:!0,children:(0,s.jsx)(x.Z,{button:!0,component:"a",children:(0,s.jsx)(m.Z,{primary:"Users"})})})]})})}),(0,s.jsx)(h.Z,{item:!0,md:9,xs:12,children:(0,s.jsx)(p.Z,{className:t.section,children:(0,s.jsxs)(f.Z,{children:[(0,s.jsx)(x.Z,{children:(0,s.jsxs)(h.Z,{container:!0,alignItems:"center",children:[(0,s.jsxs)(h.Z,{item:!0,xs:6,children:[(0,s.jsx)(E.Z,{component:"h1",variant:"h1",children:"Products"}),L&&(0,s.jsx)(j.Z,{})]}),(0,s.jsxs)(h.Z,{item:!0,xs:6,children:[(0,s.jsx)(v.Z,{onClick:z,color:"primary",variant:"contained",children:"Create"}),O&&(0,s.jsx)(j.Z,{})]})]})}),(0,s.jsx)(x.Z,{children:R?(0,s.jsx)(j.Z,{}):P?(0,s.jsx)(E.Z,{className:t.error,children:P}):(0,s.jsx)(y.Z,{children:(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(k.Z,{children:(0,s.jsxs)(C.Z,{children:[(0,s.jsx)(b.Z,{children:"ID"}),(0,s.jsx)(b.Z,{children:"NAME"}),(0,s.jsx)(b.Z,{children:"PRICE"}),(0,s.jsx)(b.Z,{children:"CATEGORY"}),(0,s.jsx)(b.Z,{children:"COUNT"}),(0,s.jsx)(b.Z,{children:"RATING"}),(0,s.jsx)(b.Z,{children:"ACTIONS"})]})}),(0,s.jsx)(S.Z,{children:N.map((function(e){return(0,s.jsxs)(C.Z,{children:[(0,s.jsx)(b.Z,{children:e._id.substring(20,24)}),(0,s.jsx)(b.Z,{children:e.name}),(0,s.jsxs)(b.Z,{children:["$",e.price]}),(0,s.jsx)(b.Z,{children:e.category}),(0,s.jsx)(b.Z,{children:e.countInStock}),(0,s.jsx)(b.Z,{children:e.rating}),(0,s.jsxs)(b.Z,{children:[(0,s.jsx)(d.default,{href:"/admin/product/".concat(e._id),passHref:!0,children:(0,s.jsx)(v.Z,{size:"small",variant:"contained",children:"Edit"})})," ",(0,s.jsx)(v.Z,{onClick:function(){return Q(e._id)},size:"small",variant:"contained",children:"Delete"})]})]},e._id)}))})]})})})]})})})]})})}r.default=(0,o.default)((function(){return Promise.resolve(O)}),{ssr:!1})}},function(e){e.O(0,[967,164,349,641,774,888,179],(function(){return r=9722,e(e.s=r);var r}));var r=e.O();_N_E=r}]);